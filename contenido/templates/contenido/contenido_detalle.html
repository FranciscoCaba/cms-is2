{% extends "base.html" %}
{%block titulo%}Ver contenido{% endblock %}
{% block contenido %}
    <h1>{{ contenido.titulo }}</h1>
    <p>Categoría: {{ contenido.categoria }}</p>
    {{ contenido.descripcion | safe }}
    {% if contenido.image %}
        <img src="{{ contenido.image.url }}" alt="{{ contenido.titulo }}" width="400" height="300">
    {% endif %}

    {% if contenido.video %}
        <video controls width="400" height="300">
            <source src="{{ contenido.video.url }}" type="video/mp4">
            Your browser does not support the video tag.
        </video>
    {% endif %}

    <p>Likes: {{ contenido.likes.count }}</p>

    <!-- Agrega el botón de like aquí -->
    {% if user.is_authenticated %}
        <form action="{% url 'toggle_like' contenido.id %}" method="post">
            {% csrf_token %}
            <button type="submit">
                {% if user_likes_contenido %}
                    Quitar Like
                {% else %}
                    Dar Like
                {% endif %}
            </button>
        </form>
    {% else %}
        <p>Inicia sesión para dar/quitar like.</p>
    {% endif %}
    <button type="button" id="copy-button" onclick="copyToClipboard()">Compartir!</button>
    <script>
        function copyToClipboard() {
            const url = window.location.href;
            navigator.clipboard.writeText(url).then(function() {
                alert('URL copiada al portapapeles: ' + url);
            }, function() {
                alert('No se pudo copiar la URL al portapapeles.');
            });
        }
    </script>

{% endblock %}